include header.pug

  h2 Ghosted Pointer
  p Demonstrates fading out the pointer if the pointer is still after some time. This is <code>true</code> for Browser Extensions 

style.
  .handsfree-pointer {
    opacity: 1;
    transition: opacity 0.35s ease;
  }
  .handsfree-pointer-hidden {
    opacity: 0;
  }

script.
  handsfree = new Handsfree()

  Handsfree.use('head.ghostedPointer', {
    // Number of frames held still
    framesStill: 0,
    // Number of frames held to ghost a pointer
    numFramesToGhost: 100,
    // Number of pixels required to update number frames held
    distToReset: 6,
    
    last: {
      x: 0,
      y: 0,
    },
    
    onFrame ({head}) {
      const dist = Math.sqrt(Math.pow((this.last.x - head.pointer.x), 2) + Math.pow((this.last.y - head.pointer.y), 2))

      if (dist < this.distToReset) {
        this.framesStill += 1
      } else {
        this.framesStill = 0
      }

      if (this.framesStill > this.numFramesToGhost) {
        head.pointer.$el.classList.add('handsfree-pointer-hidden')
      } else {
        head.pointer.$el.classList.remove('handsfree-pointer-hidden')
      }

      this.last.x = head.pointer.x
      this.last.y = head.pointer.y
    }
  })